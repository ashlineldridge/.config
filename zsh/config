# ZSH configuration

# Shell options
setopt extended_glob
setopt hist_find_no_dups
setopt inc_append_history
setopt share_history

# Load the zsh configuration files. The 'secret' file provides a mechanism
# for configuration that shouldn't be published to GitHub. Note that zshenv
# is source here even though it will have already been sourced during zsh's
# init routine due to https://www.zsh.org/mla/users/2003/msg00600.html.
for f in "${XDG_CONFIG_HOME}"/zsh/{zshenv,aliases,functions,colors,secret}; do
  if [[ -f "${f}" ]]; then
    source "${f}"
  fi
done

# Initialize prompt
fpath+="${XDG_CONFIG_HOME}/pure"
autoload -U promptinit; promptinit
prompt pure

# Shortcuts
bindkey '^R' history-incremental-search-backward
bindkey '^A' beginning-of-line
bindkey '^E' end-of-line
bindkey "^[^[[D" backward-word
bindkey "^[^[[C" forward-word
bindkey '^U' backward-kill-line
bindkey '\e_' insert-last-word

# Enables completion system for sourced scripts below
autoload -U +X compinit; compinit

# Workaround for https://github.com/kubernetes/kubectl/issues/125
source <(kubectl completion zsh | sed '/_bash_comp/ s/^#*/#/') || true

